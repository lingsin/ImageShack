{"version":3,"file":"static/js/756.0d57750b.chunk.js","mappings":"sOAOMA,EAASC,EAAAA,GAAAA,IAAH,+JAQNC,EAAWD,EAAAA,GAAAA,GAAH,+CAIRE,EAAmB,iBAAO,CAC9BC,UAD8B,SACpBC,EAAMC,GACd,OAAGA,EAAMC,OAAS,EAAUC,QAAQC,OAAO,mCACxCH,EAAMC,OAAS,EAAUC,QAAQC,OAAO,mCACxC,KAAKC,KAAKJ,GAAeE,QAAQC,OAAO,kFACpCD,QAAQG,aAIbC,EAAkB,SAAC,GAAD,IAAEC,EAAF,EAAEA,cAAF,MAAsB,CAC5CT,UAD4C,SAClCC,EAAMC,GACd,OAAIA,GAASO,EAAc,cAAgBP,EACpCE,QAAQC,OAAO,8CADmCD,QAAQG,aAsGrE,UAjGiB,WACf,IAAOG,GAAaC,EAAAA,EAAAA,KAAbD,UACDE,GAAWC,EAAAA,EAAAA,MAgBjB,OACE,UAACjB,EAAD,YACE,SAACE,EAAD,4BACA,UAAC,IAAD,CACEgB,KAAK,QACLC,SAAU,CACRC,KAAM,GAERC,WAAY,CACVD,KAAM,IAERE,SAzBW,SAACC,GAChBC,EAAAA,EAAAA,SAAcD,EAAOE,SAAUF,EAAOG,UACnCC,MAAK,WACJb,EAAUc,YACVd,EAAUe,SAASL,EAAAA,EAAAA,kBACnBR,EAAS,QACRc,OAAM,WACPC,EAAAA,GAAAA,MAAc,gCAmBdC,eAfiB,SAACC,KAgBlBC,aAAa,MAVf,WAYE,SAAC,SAAD,CACEC,MAAM,qBACNjB,KAAK,WACLkB,MAAO,CACL,CACEC,UAAU,EACVN,QAAS,wCAEX5B,GARJ,UAWE,SAAC,IAAD,OAGF,SAAC,SAAD,CACEgC,MAAM,eACNjB,KAAK,WACLkB,MAAO,CACL,CACEC,UAAU,EACVN,QAAS,kCAEX,CACEO,IAAK,EACLP,QAAS,mCAEX,CACEQ,IAAK,GACLR,QAAS,qCAdf,UAkBE,SAAC,aAAD,OAGF,SAAC,SAAD,CACEI,MAAM,2BACNjB,KAAK,kBACLkB,MAAO,CACL,CACEC,UAAU,EACVN,QAAS,kCAEXnB,GARJ,UAWE,SAAC,aAAD,OAGF,SAAC,SAAD,CACES,WAAY,CACVmB,OAAQ,EACRpB,KAAM,IAHV,UAME,SAAC,IAAD,CAAQqB,KAAK,UAAUC,SAAS,SAAhC","sources":["pages/Register.js"],"sourcesContent":["import { Button, Form, Input, message } from 'antd';\r\nimport React from 'react';\r\nimport styled from \"styled-components\";\r\nimport useStores from \"../stores\";\r\nimport { Auth } from \"../models\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst StyBox = styled.div`\r\n  margin: 30px auto;\r\n  box-shadow: 2px 2px 4px 2px rgba(0, 0, 0, 0.2);\r\n  padding: 30px;\r\n  max-width: 800px;\r\n  border-radius: 4px;\r\n`;\r\n\r\nconst StyTitle = styled.h1`\r\n  text-align: center;\r\n`;\r\n\r\nconst validateUsername = () => ({\r\n  validator(rule, value) {\r\n    if(value.length < 4) return Promise.reject(\"最少4个字符\");\r\n    if(value.length > 8) return Promise.reject(\"最多8个字符\");\r\n    if(/\\W/.test(value)) return Promise.reject(\"只能使用数字、字母或下划线\");\r\n    return Promise.resolve();\r\n  }\r\n});\r\n\r\nconst validateConfirm = ({getFieldValue}) => ({\r\n  validator(rule, value) {\r\n    if(!value || getFieldValue(\"password\") === value) return Promise.resolve();\r\n    return Promise.reject(\"两次密码不匹配\");\r\n  }\r\n});\r\n\r\nconst Register = () => {\r\n  const {UserStore} = useStores();\r\n  const navigate = useNavigate();\r\n\r\n  const onFinish = (values) => {\r\n    Auth.register(values.username, values.password)\r\n      .then(() => {\r\n        UserStore.resetUser();\r\n        UserStore.pullUser(Auth.getCurrentUser());\r\n        navigate(\"/\");\r\n      }).catch(() => {\r\n        message.error(\"注册失败\");\r\n      });\r\n  };\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n  };\r\n\r\n  return (\r\n    <StyBox>\r\n      <StyTitle>注册</StyTitle>\r\n      <Form\r\n        name=\"basic\"\r\n        labelCol={{\r\n          span: 6,\r\n        }}\r\n        wrapperCol={{\r\n          span: 14,\r\n        }}\r\n        onFinish={onFinish}\r\n        onFinishFailed={onFinishFailed}\r\n        autoComplete=\"off\"\r\n      >\r\n        <Form.Item\r\n          label=\"用户名\"\r\n          name=\"username\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: '请输入用户名',\r\n            },\r\n            validateUsername\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"密码\"\r\n          name=\"password\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: '请输入密码',\r\n            },\r\n            {\r\n              min: 6,\r\n              message: \"最少6个字符\"\r\n            },\r\n            {\r\n              max: 10,\r\n              message: \"最多10个字符\"\r\n            }\r\n          ]}\r\n        >\r\n          <Input.Password />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"确认密码\"\r\n          name=\"confirmPassword\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: '请确认密码',\r\n            },\r\n            validateConfirm\r\n          ]}\r\n        >\r\n          <Input.Password />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          wrapperCol={{\r\n            offset: 6,\r\n            span: 18,\r\n          }}\r\n        >\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            提交\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </StyBox>\r\n  );\r\n};\r\n\r\nexport default Register;"],"names":["StyBox","styled","StyTitle","validateUsername","validator","rule","value","length","Promise","reject","test","resolve","validateConfirm","getFieldValue","UserStore","useStores","navigate","useNavigate","name","labelCol","span","wrapperCol","onFinish","values","Auth","username","password","then","resetUser","pullUser","catch","message","onFinishFailed","errorInfo","autoComplete","label","rules","required","min","max","offset","type","htmlType"],"sourceRoot":""}